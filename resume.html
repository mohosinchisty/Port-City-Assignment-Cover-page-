<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ATS Friendly Resume Generator</title>
<style>
body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f0f2f5; }
.container { max-width:900px; margin:auto; padding:20px; }
h2,h3 { margin-top:15px; color:#0073e6; }
input, textarea, select, button { width:100%; margin:5px 0; padding:8px; border-radius:6px; border:1px solid #ccc; box-sizing:border-box; font-size:13px; }
button { background:#0073e6; color:#fff; border:none; cursor:pointer; font-weight:bold; transition:0.3s; }
button:hover { background:#005bb5; }
.entry { margin-bottom:8px; background:#fff; padding:8px; border-radius:6px; box-shadow:0 2px 4px rgba(0,0,0,0.1); }

.page { width:210mm; padding:15mm; margin-top:20px; background:white; box-shadow:0 0 5px rgba(0,0,0,0.1); box-sizing:border-box; font-size:13px; line-height:1.3; }
.page h1 { text-align:center; font-size:26px; margin-bottom:2px; color:#0073e6; }
.page p.title { text-align:center; font-size:16px; margin-top:0; margin-bottom:10px; font-weight:bold; }
.page h2 { font-size:18px; margin-top:12px; color:#0073e6; }

.two-column { display:flex; gap:20px; }
.left-col { width:35%; }
.right-col { width:65%; }

ul { padding-left:18px; margin-top:5px; margin-bottom:5px; }

@media print {
  @page { size: A4; margin: 15mm; }
  body * { visibility: hidden; }
  #resumePreview, #resumePreview * { visibility: visible; }
  #resumePreview { position:absolute; left:0; top:0; width:100%; margin:0; box-shadow:none; }
}
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
<div class="container">
<h2>ATS Friendly Resume Generator</h2>
<input type="text" id="name" placeholder="Full Name">
<select id="titleSelect">
  <option value="">-- Select Job Title --</option>
</select>
<input type="text" id="title" placeholder="Job Title (editable)">
<input type="text" id="email" placeholder="Email">
<input type="text" id="phone" placeholder="Phone">
<input type="text" id="linkedin" placeholder="LinkedIn">
<input type="text" id="location" placeholder="Location">
<textarea id="summary" placeholder="Professional Summary"></textarea>

<h3>Technical Skills</h3>
<div id="techSkills"><input type="text" placeholder="Add technical skill"></div>
<button onclick="addSkill('techSkills')">+ Add Technical Skill</button>

<h3>Soft Skills</h3>
<div id="softSkills"><input type="text" placeholder="Add soft skill"></div>
<button onclick="addSkill('softSkills')">+ Add Soft Skill</button>

<h3>Achievements</h3>
<div id="achievements"><input type="text" placeholder="Add achievement"></div>
<button onclick="addSkill('achievements')">+ Add Achievement</button>

<h3>Certifications</h3>
<div id="certifications"><input type="text" placeholder="Add certification"></div>
<button onclick="addSkill('certifications')">+ Add Certification</button>

<h3>Experience</h3>
<div id="experience"></div>
<button onclick="addExperience(jobOptions)">+ Add Experience</button>

<h3>Education</h3>
<div id="education"></div>
<button onclick="addEducation()">+ Add Education</button>

<!-- Buttons -->
<button onclick="updatePreview()">Generate Resume</button>
<button onclick="window.print()">Print Resume</button>
<button onclick="downloadPdf()">Download PDF</button>
<button onclick="openPdfToDocx()">PDF ➝ Word Converter</button>

<div id="resumePreview"></div>
</div>

<script>
// =================== JOB OPTIONS ===================
const jobOptions = [
  { title:"Textile Engineer", summary:"Highly motivated...", techSkills:["Textile Testing","Fabric Analysis"], softSkills:["Problem Solving"], achievements:["Reduced production waste by 15%"], certifications:["Textile Diploma"], experience:[{title:"Textile Engineer",company:"ABC Textiles",start:"2022-01",end:"2023-08",current:false,responsibilities:["Supervised production line","Quality inspection"]}] },
  { title:"Merchandiser", summary:"Results-driven...", techSkills:["Vendor Management"], softSkills:["Negotiation"], achievements:["Increased client satisfaction"], certifications:["Merchandising Certificate"], experience:[{title:"Merchandiser",company:"XYZ Textiles",start:"2021-06",end:"2023-06",current:false,responsibilities:["Managed client orders"]}] },
  { title:"Software Developer", summary:"Proficient Software Developer...", techSkills:["JavaScript","React"], softSkills:["Problem Solving"], achievements:["Improved app performance"], certifications:["CS Degree"], experience:[{title:"Software Developer",company:"Tech Solutions",start:"2021-01",end:"2023-06",current:false,responsibilities:["Developed responsive apps"]}] },
  { title:"Data Analyst", summary:"Skilled Data Analyst...", techSkills:["Python","SQL"], softSkills:["Analytical Thinking"], achievements:["Automated reporting"], certifications:["Data Analysis Certificate"], experience:[{title:"Data Analyst",company:"Data Corp",start:"2022-02",end:"2023-06",current:false,responsibilities:["Generated reports"]}] },
  { title:"Electrical Engineer", summary:"Electrical Engineer with experience...", techSkills:["Circuit Design"], softSkills:["Team Leadership"], achievements:["Reduced failures"], certifications:["Electrical Engineering Degree"], experience:[{title:"Electrical Engineer",company:"Power Ltd",start:"2019-01",end:"2023-04",current:false,responsibilities:["Designed circuits"]}] },
  { title:"Business Analyst", summary:"Business Analyst with expertise...", techSkills:["Excel"], softSkills:["Communication"], achievements:["Improved reporting"], certifications:["BBA Degree"], experience:[{title:"Business Analyst",company:"Biz Solutions",start:"2021-03",end:"2023-06",current:false,responsibilities:["Analyzed business metrics"]}] },
  { title:"HR Manager", summary:"Experienced HR Manager...", techSkills:["Recruitment"], softSkills:["Leadership"], achievements:["Reduced turnover"], certifications:["HR Management Certificate"], experience:[{title:"HR Manager",company:"Global Solutions",start:"2019-06",end:"2023-06",current:false,responsibilities:["Managed recruitment"]}] },
  { title:"English Teacher", summary:"Professional English Teacher...", techSkills:["Lesson Planning"], softSkills:["Patience"], achievements:["Improved scores"], certifications:["TESOL Certificate"], experience:[{title:"English Teacher",company:"Bright Academy",start:"2020-01",end:"2023-06",current:false,responsibilities:["Planned lessons"]}] },
  { title:"Marketing Executive", summary:"Dynamic Marketing Executive...", techSkills:["Digital Marketing"], softSkills:["Creativity"], achievements:["Increased engagement"], certifications:["Digital Marketing Certificate"], experience:[{title:"Marketing Executive",company:"Bright Media",start:"2021-01",end:"2023-06",current:false,responsibilities:["Planned campaigns"]}] },
  { title:"Call Center Executive", summary:"Motivated Call Center Executive...", techSkills:["CRM Systems"], softSkills:["Problem Solving"], achievements:["95% satisfaction"], certifications:["Customer Service Certificate"], experience:[{title:"Call Center Executive",company:"Global Call Services",start:"2022-06",end:"2023-06",current:false,responsibilities:["Handled calls"]}] }
];
const titleSelect=document.getElementById("titleSelect");
jobOptions.forEach(job=>{ const opt=document.createElement("option"); opt.value=job.title; opt.textContent=job.title; titleSelect.appendChild(opt); });
titleSelect.addEventListener("change",function(){
  const selected=jobOptions.find(j=>j.title===this.value);
  if(selected){
    document.getElementById("title").value=selected.title;
    document.getElementById("summary").value=selected.summary;
    fillSection("techSkills",selected.techSkills);
    fillSection("softSkills",selected.softSkills);
    fillSection("achievements",selected.achievements);
    fillSection("certifications",selected.certifications);
    document.getElementById("experience").innerHTML="";
    selected.experience.forEach(exp=>{ addExperience(null,exp); });
  }
});

// =================== ADD FIELDS ===================
function addSkill(sectionId){ const input=document.createElement("input"); input.type="text"; input.placeholder="Add item"; document.getElementById(sectionId).appendChild(input); }
function addExperience(prefill,expData){
  const div=document.createElement("div"); div.className="entry";
  let optionsHtml=prefill?prefill.map(job=>`<option value="${job.title}">${job.title}</option>`).join(""):"";
  div.innerHTML=`<label>Job Title:</label>
    <select class="jobTitle"><option value="">-- Select from list --</option>${optionsHtml}</select>
    <input type="text" class="manualJobTitle" placeholder="Or type job title manually">
    <input type="text" placeholder="Company Name" value="${expData?expData.company:""}">
    <input type="month" value="${expData?expData.start:""}">
    <input type="month" value="${expData?expData.end:""}">
    <label><input type="checkbox" class="currentJob" ${expData&&expData.current?"checked":""}> Currently Working</label>
    <textarea placeholder="Responsibilities (one per line)">${expData?expData.responsibilities.join("\n"):""}</textarea>`;
  const checkbox=div.querySelector(".currentJob");
  const endDateInput=div.querySelectorAll("input[type='month']")[1];
  checkbox.addEventListener("change",function(){ if(this.checked){ endDateInput.disabled=true; endDateInput.value=""; } else endDateInput.disabled=false; });
  if(checkbox.checked) endDateInput.disabled=true;
  document.getElementById("experience").appendChild(div);
}
function addEducation(){
  const div=document.createElement("div"); div.className="entry";
  div.innerHTML=`<input type="text" placeholder="Degree">
                 <input type="text" placeholder="Institute">
                 <input type="month" placeholder="Start Date">
                 <input type="month" placeholder="End Date">
                 <input type="number" placeholder="CGPA" step="0.01" min="0" max="5">`;
  document.getElementById("education").appendChild(div);
}
function fillSection(id,arr){ const c=document.getElementById(id); c.innerHTML=""; if(arr){arr.forEach(v=>{const i=document.createElement("input");i.type="text";i.value=v;c.appendChild(i);});} }

// =================== GENERATE PREVIEW ===================
function updatePreview(){
  function formatDate(d){ if(!d)return""; const dt=new Date(d); return dt.toLocaleDateString("en-US",{year:"numeric",month:"short"}); }
  let header=`<h1>${document.getElementById("name").value}</h1>
              <p class="title">${document.getElementById("title").value}</p>
              <p>Email: ${document.getElementById("email").value}<br>Phone: ${document.getElementById("phone").value}<br>LinkedIn: ${document.getElementById("linkedin").value}<br>Location: ${document.getElementById("location").value}</p>`;
  
  // Build sections
  let summary=`<h2>Professional Summary</h2><p>${document.getElementById("summary").value}</p>`;
  let expsHTML="";
  document.querySelectorAll("#experience .entry").forEach(e=>{
    const dd=e.querySelector(".jobTitle")?.value||"";
    const manual=e.querySelector(".manualJobTitle")?.value||"";
    const title=manual||dd;
    const company=e.querySelector("input[placeholder='Company Name']")?.value||"";
    const start=formatDate(e.querySelectorAll("input[type='month']")[0]?.value);
    const endInput=e.querySelectorAll("input[type='month']")[1];
    const current=e.querySelector(".currentJob");
    const end=current?.checked?"Present":formatDate(endInput?.value);
    const resp=e.querySelector("textarea")?.value.split("\n").filter(r=>r.trim()).map(r=>`<li>${r}</li>`).join("");
    expsHTML+=`<p><b>${title}</b>, ${company} (${start} - ${end})</p>${resp?`<ul>${resp}</ul>`:""}`;
  });
  if(expsHTML) expsHTML="<h2>Experience</h2>"+expsHTML;
  function listInputs(sel,h){ const arr=[...document.querySelectorAll(sel)].map(i=>i.value.trim()).filter(v=>v); return arr.length?`<h2>${h}</h2><ul>${arr.map(v=>`<li>${v}</li>`).join("")}</ul>`:""; }
  const ts=listInputs("#techSkills input","Technical Skills");
  const ss=listInputs("#softSkills input","Soft Skills");
  const ach=listInputs("#achievements input","Achievements");
  const cert=listInputs("#certifications input","Certifications");
  let edu=""; document.querySelectorAll("#education .entry").forEach(ed=>{
    const deg=ed.querySelector("input[placeholder='Degree']")?.value||""; 
    const inst=ed.querySelector("input[placeholder='Institute']")?.value||"";
    const s=formatDate(ed.querySelectorAll("input[type='month']")[0]?.value);
    const e=formatDate(ed.querySelectorAll("input[type='month']")[1]?.value);
    const cg=ed.querySelector("input[type='number']")?.value;
    edu+=`<p><b>${deg}</b>, ${inst} (${s} - ${e})${cg?` – CGPA: ${cg}`:""}</p>`;
  });
  if(edu) edu="<h2>Education</h2>"+edu;
  
  let content=summary+expsHTML+ts+ss+ach+cert+edu;
  let wordCount=content.replace(/<[^>]+>/g,"").trim().split(/\s+/).length;
  
  let html=`<div class="page">${header}`;
  if(wordCount>=200){
    html+=`<div class="two-column"><div class="left-col">${summary}${edu}${ts}${ss}${ach}${cert}</div><div class="right-col">${expsHTML}</div></div>`;
  } else {
    html+=content;
  }
  html+="</div>";
  document.getElementById("resumePreview").innerHTML=html;
}

// =================== PDF DOWNLOAD ===================
function downloadPdf(){ const { jsPDF }=window.jspdf; const resume=document.getElementById("resumePreview"); html2canvas(resume,{scale:2}).then(canvas=>{const img=canvas.toDataURL("image/png"); const pdf=new jsPDF("p","mm","a4"); const w=pdf.internal.pageSize.getWidth(); const h=canvas.height*w/canvas.width; pdf.addImage(img,"PNG",0,0,w,h); pdf.save("Resume.pdf");}); }

// =================== OPEN EXTERNAL PDF ➝ DOCX ===================
function openPdfToDocx(){ window.open("https://pdf.coderobo.org/","_blank"); }
</script>
</body>
</html>
